{
  "type": "VerticalLayout",
  "elements": [
    {
      "type": "Group",
      "label": "Enums",
      "elements": [
        {
          "type": "Dropdown",
          "scope": "#/properties/letter",
          "options": {
            "items": [
              {
                "label": "A",
                "value": "A"
              },
              {
                "label": "B",
                "value": "B"
              },
              {
                "label": "C",
                "value": "C"
              },
              {
                "label": "D",
                "value": "D"
              },
              {
                "label": "E",
                "value": "E"
              },
              {
                "label": "F",
                "value": "F"
              },
              {
                "label": "G",
                "value": "G"
              },
              {
                "label": "H",
                "value": "H"
              },
              {
                "label": "I",
                "value": "I"
              },
              {
                "label": "H",
                "value": "H"
              }
            ],
            "events": {
              "onChange": {
                "arguments": "JForm,nval,oval",
                "body": "JForm.setValue('custom', nval);"
              }
            }
          }
        },
        {
          "type": "Dropdown",
          "scope": "#/properties/categories",
          "options": {
            "events": {
              "deepChange": {
                "arguments": "_,payload",
                "body": "return fetch('https://api.publicapis.org/categories').then((res) => res.json()).then((res) => {return _.map(_.uniq(_.filter(res.categories, (o)=> { return  o.charAt(0)== payload.letter;})), (v)=>{ return { value:v, label:v}});});"
              }
            }
          },
          "rule": {
            "effect": "ONCHANGE",
            "condition": {
              "type": "AND",
              "conditions": [
                {
                  "type": "DEPENDENCY",
                  "scope": "#/properties/letter"
                }
              ]
            }
          }
        },
        {
          "type": "Dropdown",
          "scope": "#/properties/entries",
          "options": {
            "events": {
              "deepChange": {
                "arguments": "_,payload",
                "body": "return fetch('https://api.publicapis.org/entries?'+ ( new URLSearchParams( {category:payload.categories} ) ).toString(),{method: 'GET'}).then((res) => res.json()).then((res) => {return _.map( _.uniq(_.map( _.slice(res.entries, 0, 50), (o)=> { return o.API;})),(v)=>{ return {value:v,label:v}});});"
              }
            }
          },
          "rule": {
            "effect": "ONCHANGE",
            "condition": {
              "type": "AND",
              "conditions": [
                {
                  "type": "DEPENDENCY",
                  "scope": "#/properties/letter"
                },
                {
                  "type": "DEPENDENCY",
                  "scope": "#/properties/categories"
                }
              ]
            }
          }
        },
        {
          "type": "Control",
          "scope": "#/properties/custom"
        }
      ]
    }
  ]
}
